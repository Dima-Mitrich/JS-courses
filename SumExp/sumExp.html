<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>

        let exp = "((3+2)*2)-3";

        function sum(exp) {

            while (exp.includes("(")) {
                let open = exp.indexOf("(");
                let close = exp.indexOf(")");

                let res = exp.substring(open + 1, close + 1);
                res = sum(res);

                let arr22 = exp.split('');
                arr22.splice(open, close + 1, res);

                exp = arr22.join('');
            }

            let reg = /[\+ \* \- \/]/;
            let reg1 = /\d/;

            let arr1 = exp.split(reg);
            let arr2 = exp.split(reg1);

            for (let i = 0; i < arr1.length; i++) {
                arr1[i] = parseFloat(arr1[i]);
            }

            for (let i = 0; i < arr2.length; i++) {
                if (!arr2[i] || arr2[i] == '.') {
                    arr2.splice(i, 1);
                    i--;
                }
            }

           /* for (let i = 0; i < arr2.length; i++) {
                if (arr2[i] == ".") arr2.splice(i, 1);
            }*/

            while (arr2.includes("*") || arr2.includes("/")) {
                for (let i = 0; i < arr2.length; i++) {
                    if (arr2[i] == "*") {
                        let z = arr1[i] * arr1[i + 1];
                        arr1.splice(i, 2, z);
                        arr2.splice(i, 1);
                    } else if (arr2[i] == "/") {
                        let z = arr1[i] / arr1[i + 1];
                        arr1.splice(i, 2, z);
                        arr2.splice(i, 1);
                    }
                }
            }

            while (arr2.includes("-")) {
                for (let i = 0; i < arr2.length; i++) {
                    if (arr2[i] == "-") {
                        let z = 0 - arr1[i + 1];
                        arr1.splice(i + 1, 1, z);
                        arr2.splice(i, 1);
                    }
                }
            }

            let result = arr1.reduce((s, c) => s + c);
            return result;
        }

        console.log(`${exp} = ${sum(exp)}`);

    </script>
</body>

</html>